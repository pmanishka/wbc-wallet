<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">    
<head>
     <style type="text/css">
        #flot-placeholder{width:350px;height:300px;}        
    </style>
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="http://www.pureexample.com/js/flot/excanvas.min.js"></script><![endif]-->
    <script type="text/javascript" src="http://www.pureexample.com/js/lib/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="http://www.pureexample.com/js/flot/jquery.flot.min.js"></script>
    <script type="text/javascript">
       /* var data = [['2.5', 130], ['3.5', 40], ['4.5', 80], ['5.5', 160], ['6.5', 159], ['6.5', 370], ['8.5', 330], ['9.5', 350], ['10.5', 370], ['11.5', 400]];
		
        var dataset = [{label: "line1",data: data}];
 
        var options = {
            series: {
                lines: { show: true },
                points: {
                    radius: 3,
                    show: true
                }
            }
        };
 
        $(document).ready(function () {
            $.plot($("#flot-placeholder"), dataset, options);
        });*/
		
		
jQuery( document ).ready(function() {
	// Get BitPay Data
	
	
	$.ajax({
	type: 'GET',
	url: 'https://apiv2.bitcoinaverage.com/indices/global/history/BTCUSD?period=daily&?format=json',
	dataType: 'json',
	async: false,
		success: function (data) {
		var resGraph = data.length; 
		//var arr = [];
		var endRec = 10;
			 for(i = 0, len = resGraph.length, graphData = "", rDate= "", resTime= "" ; i < endRec; i++){
				
				var rDate = new Date(data[i].time);
				
				var cHour = rDate.getHours();
				var cMin = rDate.getMinutes();
				var resTime = cHour+ "." + cMin;
				
				 if(i === endRec-1) {  //The last one
					graphData += ( resTime + ',' + data[i].average) ;
				 } else {
					graphData += ( resTime + ',' + data[i].average)  + ',';
				 } 
				
				
			 }
			
			 var gdata = (graphData) ;
			// alert (gdata);
			 var data = [['2.5', '8880.6'], ['3.5', '8500.5'], ['4.5', '8600.5'], ['5.5', '8546.5']];
			//alert (data);
			var dataset = [{label: "line1",data: data}];
	 
			var options = {
				series: {
					lines: { show: true },
					points: {
						radius: 3,
						show: true
					}
				}
			};
	 
			$(document).ready(function () {
				$.plot($("#flot-placeholder"), dataset, options);
			});
		
		}
	});
});
    </script>
	
</head>
<body>
    <div id="flot-placeholder"></div>
    <div class="graphRes"></div>
</body>
</html>